<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <title>
        <!--(auto-fill by runme.js-->
    </title>

    <!-- ChiliPeppr is based on bootstrap CSS. -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <!-- Customized version of require.js for ChiliPeppr. Please see require.js docs for how
    ChiliPeppr's dependency system works as it's based on require.js. -->
    <!--<script type='text/javascript' src="//i2dcui.appspot.com/js/require.js"></script>-->
    <script type='text/javascript' src="//127.0.0.1:3000/widgets/require.js"></script>

    <!-- widget.css DON'T REMOVE -->
    <style type='text/css'>
        /* widget.css will get inlined here by runme.js. don't remove this comment or inlining will fail. */
    </style>
    <link rel="stylesheet" type="text/css" href="widget.css">
    <!-- DON'T REMOVE end widget.css -->

    <!-- widget.js DON'T REMOVE -->
    <script type='text/javascript'>
        //<![CDATA[
        /* widget.js will get inlined here by runme.js. don't remove this comment or inlining will fail. */
        //]]>
    </script>
    <script type='text/javascript' src="widget.js"></script>
    <!-- DON'T REMOVE end widget.js -->

</head>

<body>

    <!--<div id="com-chilipeppr-widget-3dviewer" class="panel panel-default" style="float:left;">-->
    <div id="com-chilipeppr-widget-3dviewer" class="panel panel-default" style="">

        <div id="com-chilipeppr-widget-3dviewer-body" class="panel-body">
            <!-- WebGL rendering area -->
            <div id="com-chilipeppr-widget-3dviewer-renderArea" tabindex="1">
                <div class="youhavenowebgl hidden" style="width:100%;height:100%;color:white;position:absolute;top:0;left:0;">You appear to not have WebGL support or WebGL has crashed. The 3D Viewer can't be used without WebGL.</div>
                <div class="data-details hidden">Drag and Drop Gcode Here...</div>
            </div>
            <div class="com-chilipeppr-widget-3dviewer-inspect panel hidden" style="top:40px;left:20px">

                <table class="table table-bordered table-striped table-condensed">
                    <tbody>
                        <tr>
                            <th colspan="2" class="info-title">
                                <button type="button" class="close" style="width:100%;text-align:right;">&times;</button>
                            </th>
                        </tr>
                        <tr class="row-signal" xstyle="vertical-align:middle;">
                            <td xstyle="vertical-align:middle;">Line</td>
                            <td xstyle="vertical-align:middle;">
                                <span class="inspect-line" xstyle="vertical-align:middle;float:left;"></span>
                                <button class="btn btn-info btn-sm pull-right inspect-btn-goto">Go To</button>
                            </td>
                        </tr>
                        <tr class="">
                            <td class="">Gcode</td>
                            <td class="inspect-gcode"></td>
                        </tr>
                        <!-- <tr class="">
                        <td class="">Start</td>
                        <td class="inspect-start"></td>
                    </tr> -->
                        <tr class="">
                            <td class="">End Pos</td>
                            <td class="inspect-end"></td>
                        </tr>
                        <tr class="">
                            <td class="">Feedrate</td>
                            <td class="inspect-feedrate"></td>
                        </tr>
                        <tr>
                            <td>Distance of Move</td>
                            <td class="inspect-distance"></td>
                        </tr>
                        <tr>
                            <td>Time for This Line</td>
                            <td class="inspect-time"></td>
                        </tr>
                        <tr>
                            <td>Est Time to Get Here</td>
                            <td class="inspect-timeSum"></td>
                        </tr>
                    </tbody>
                </table>

            </div>
            <div id="warningArea">
                <div class="alert alert-warning alert-dismissable hidden">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>G2/G3 arcs only rendered as straight lines. They are yellow to show where actual positioning in your CNC will differ from 3D rendering. If anyone wants to fork and fix arcs, feel free.</div>

            </div>
        </div>
    </div>

    <!-- Modal for Out of Local Storage -->
    <div id="com-chilipeppr-widget-3dviewer-outofspace" class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">3D Viewer Out of Local Storage Space</h4>
                </div>
                <div class="modal-body">
                    <p>You are out of local storage space, so ChiliPeppr can't save your Gcode file. Please delete all of your local storage files for ChiliPeppr using the
                        <button type="button" class="btn btn-sm btn-info dropdown-toggle" data-toggle="dropdown"
                        data-container="body" data-toggle="popover" data-placement="auto" data-trigger="hover" data-title="Drag and Drop" data-content="Drag a Gcode file onto your browser window to load it."><span class="glyphicon glyphicon-file"></span><span class="glyphicon glyphicon-share-alt" style="margin-left:-2px;color:#666666;"></span> <span class="caret"></span></button> in the workspace.</p>
                    <p>You can also ignore this error and proceed since ChiliPeppr will simply load your file into RAM and function perfectly fine. The only downside is if you reload ChiliPeppr, it won't have your most recent file loaded.</p>
                    <p>Browsers typically only allow for 5MB of local storage, which isn't much.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
        <script id="vertexShader" type="x-shader/x-vertex">
            uniform vec3 viewVector; uniform float c; uniform float p; varying float intensity; void main() { vec3 vNormal = normalize( normalMatrix * normal ); vec3 vNormel = normalize( normalMatrix * viewVector ); intensity = pow( c - dot(vNormal, vNormel), p );
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 ); }
        </script>

        <!-- fragment shader a.k.a. pixel shader -->
        <script id="fragmentShader" type="x-shader/x-vertex">
            uniform vec3 glowColor; varying float intensity; void main() { vec3 glow = glowColor * intensity; gl_FragColor = vec4( glow, 1.0 ); }
        </script>
    </div>

</body>

</html>
